# **ğŸŒˆPrintfğŸŒˆ**

## **%d,%iêµ¬í˜„**

---

- %d, %i ì˜ ì°¨ì´ì 
- printf ê°™ì€ outputì—ì„œëŠ” ì°¨ì´ê°€ ì—†ê³  scanf ê°™ì€ input í˜•ì‹ ì§€ì •ìì¼ ë•Œ ì°¨ì´ê°€ ë‚œë‹¤.

```c
int ft_print_di(va_list *ap)
{
    char *res;
    int nbr;
    int i;

    i = 0;
    nbr = va_arg(*ap, int); //intíƒ€ì…ë§Œí¼ ì½ìŒ
    res = ft_itoa(nbr); //ìˆ«ìë¥¼ ë¬¸ìë¡œ ë³€í™˜í•˜ëŠ” itoaì‚¬ìš©í•˜ì—¬ resì—ì €ì¥
    while (res[i] != '\0')
    {
        write(1, &res[i], 1);
        i++;
    }
    free(res);
    return (i);
}
```

```c
int ft_intsize(int n)
{
    int i;

    if (n > 0) //ì–‘ìˆ˜ë¼ë©´ 0
        i = 0;
    else //ìŒìˆ˜ë¼ë©´ '-' ë¥¼ ë„£ì–´ì•¼ í•˜ê¸°ë•Œë¬¸ì— 1ë¶€í„°ì‹œì‘
        i = 1;
    while (n != 0)
    {
        n /= 10;
        i++;
    }
    return (i);
}

char *ft_itoa(int n)
{
    int len;
    long long num; //ì–¸ë”í”Œë¡œìš°ë•Œë¬¸ì—
    char *result;

    num = n;
    len = ft_intsize(n); //í• ë‹¹í•´ì£¼ëŠ” ë§Œí¼ì˜ ê¸¸ì´ë¥¼ êµ¬í•˜ëŠ” í•¨ìˆ˜ì´ìš©
    result = (char *)malloc(sizeof(char) * (len + 1));
    if (!result)
        return (NULL);
    result[len--] = '\0'; //ë§ˆì§€ë§‰ì— ë„ í• ë‹¹
    if (num < 0)
    {
        num *= -1;
        result[0] = '-';
    }
    if (n == 0)
        result[0] = '0';
    while (num > 0)
    {
        result[len--] = (num % 10) + '0'; //ë’¤ì—ë¶€í„° ë‚˜ë¨¸ì§€ë¡œ ì±„ì›€
        num /= 10;
    }
    return (result); // ë¬¸ìì—´ë°˜í™˜
}
```

- ## mallocì‹œ free ë¬¸ì œë¡œ ì• ë¨¹ì€ì 
- itoaí•¨ìˆ˜ì—ì„œ resultì—ë‹¤ê°€ ë§ë¡ì„ í–ˆê¸°ë•Œë¬¸ì— ê±°ê¸°ì— freeë¥¼ ë‹¹ì—°íˆ í•´ì¤˜ì•¼í•œë‹¤ê³  ìƒê°ì„í–ˆì—ˆë””.
- ê·¼ë° ê·¸ëŸ¬ìë‹ˆ ë¬¸ìì—´ì„ ë°˜í™˜í• ìˆ˜ê°€ì—†ê³  êµ‰ì¥íˆ í—·ê°ˆë ¸ëŠ”ë°
- ê³µë¶€ë¥¼ í•´ë³¸ê²°ê³¼ ë§ë¡ì„ í•˜ê²Œë˜ë©´ ìš°ì„  ë°˜í™˜ê°’ì€ í• ë‹¹ëœ ë©”ëª¨ë¦¬ì˜ ì£¼ì†Œê°’ì´ë‹¤.
  ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì‹œìŠ¤í…œ ë©”ëª¨ë¦¬ìƒì— í• ë‹¹ëœ ê³µê°„ì´ ìˆê³  resultëŠ” ê·¸ì£¼ì†Œë§Œ ê°€ì§€ê³ ìˆëŠ”ê²ƒ, ê·¸ê±¸ resì— ë„˜ê¸°ë©´ resë¥¼ freeí•´ì£¼ë©´ ê²°êµ­ ê·¸ì£¼ì†Œê°’ì„ freeí•´ì£¼ëŠ”ê²ƒì´ë‹¤.
- freeëŠ” í•­ìƒ ë‹¤ ì‚¬ìš©í•œ ë’¤ì— freeí•´ì¤˜ì•¼ í•œë‹¤.

---

## %u ì„œì‹ì§€ì •ì êµ¬í˜„

- ë¶€í˜¸ì—†ëŠ” ì •ìˆ˜í˜•ìœ¼ë¡œ ì¶œë ¥í•˜ë¼ëŠ” ê²ƒ
- %u ê°™ì€ ê²½ìš°ì—ëŠ” unsinged ìë£Œ í˜•ì´ê¸° ë•Œë¬¸ì— ê¸°ì¡´%dì—ì„œ
  ì¶œë ¥ í•œ ë¶€í˜¸ì˜ ì¶œë ¥ì„ ì œê±°í•œ ë¡œì§ì„ ì‚¬ìš©í•˜ë©´ ë˜ì—ˆë‹¤.
- %uëŠ” ë¶€í˜¸ê°€ì—†ê¸°ë•Œë¬¸ì— ìµœëŒ€ ìˆ˜ê°€ intë³´ë‹¤ 2ë°°ëŠ” ë” í¬ê²Œë‚˜ì˜¨ë‹¤.
- ê·¸ë ‡ê¸° ë•Œë¬¸ì— unsigned intë¡œ ìºìŠ¤íŒ…í•˜ì—¬ ì‚¬ìš©í–ˆë‹¤.
-

![](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/7b79684a-6f14-491f-89aa-cd8ff506d9a9/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-01-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.54.39.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220128%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220128T041154Z&X-Amz-Expires=86400&X-Amz-Signature=fdcf3199c0a1f7dacdd2d77316a263aee2ef3361d00c8a3a73fde37b48184174&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-01-21%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25202.54.39.png%22&x-id=GetObject)

- ì¶œì²˜ : ì½”ë”©ë„ì¥

```c
int ft_print_u(va_list *ap)
{
    int i;
    unsigned int nbr;
    char *res;

    i = 0;
    nbr = va_arg(*ap, int);
    res = ft_itoa_u(nbr);
    while (res[i] != '\0')
    {
        write(1, &res[i], 1);
        i++;
    }
    free(res);
    return (i);
}
```

- itoa í•¨ìˆ˜ëŠ” unsigned intë¡œ ë°”ê¾¼ê±° ë§ê³ ëŠ” ì°¨ì´ê°€ ì—†ê³ 
- intsizeì—ì„œ ì°¨ì´ê°€ ë°œìƒí•œë‹¤.

```c
int ft_intsize_u(unsigned int n)
{
    int i;

    i = 0;
    if (n == 0) //i = 0ì´ë¼ë©´ itoaí•¨ìˆ˜ì—ì„œ ë„ ë„£ê³  0ë„ ë„£ì–´ì¤˜ì„œ ë„ì´ ë“¤ì–´ê°€ì§€ì•ŠëŠ”ë‹¤. ì•ˆí•´ì£¼ë©´ ì“°ë ˆê¸°ê°’ ë°œìƒ
        i = 1;
    while (n != 0)
    {
        n /= 10;
        i++;
    }
    return (i);
}
```

---

## %x

- %xëŠ” ì†Œë¬¸ìë¥¼ ì‚¬ìš©í•˜ì—¬ ìˆ«ìë¥¼ 16ì§„ìˆ˜ë¡œ ì¶œë ¥
- %XëŠ” ëŒ€ë¬¸ìë¥¼ ì‚¬ìš©í•˜ì—¬ ìˆ«ìë¥¼ 16ì§„ìˆ˜ë¡œ ì¶œë ¥í•˜ëŠ”ê²ƒì´ë‹¤.
- ì˜ˆì „ì— 16ì§„ìˆ˜ë¥¼ ë³€í™˜í•˜ëŠ”ê²ƒì„ í•´ë³¸ì ì´ìˆëŠ”ë° ì˜ê¸°ì–µì´ ë‚˜ì§€ì•Šì•„ì„œ ì œì¼ì˜¤ë˜ê±¸ë¦¬ê³ 
  í˜ë“¤ì—ˆë‹¤..
- ì²˜ìŒì— ìƒê°í•œ ë¡œì§ì€ ë‚˜ë¨¸ì§€ë¥¼ êµ¬í•´ì„œ ifë¬¸ìœ¼ë¡œ í•˜ë‚˜ì”© ë‹¤ì²˜ë¦¬í•˜ëŠ”ë°©ë²•ì´ì˜€ëŠ”ë°
  ê·¸ë ‡ê²Œ êµ¬í˜„í•˜ë©´ ìˆ«ìê°€ ì»¤ì§ì—ë”°ë¼ ì œëŒ€ë¡œ ëœ ë³€í™˜ì´ ë¶ˆê°€ëŠ¥í•´ì ¸ì„œ ë‹¤ì‹œ ì²¨ë¶€í„° ì§°ë‹¤..
- ê·¸ë˜ì„œ ë‚´ê°€ ìƒê°í•œ ë¡œì§
- 1. ì •ìˆ˜ë¥¼ 16ì§„ìˆ˜ë¡œ ë°”ê¿”ì„œ ë¬¸ìì—´ì— ì €ì¥
- 2. ê·¸ëŸ¬ê¸° ìœ„í•´ì„œëŠ” mallocì„ í•´ì•¼í•˜ê³  len, ëª‡ê°œê°€ í•„ìš”í•œì§€, ê¸¸ì´ë¥¼ êµ¬í•˜ëŠ” lenì„ êµ¬í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì•¼í•œë‹¤.

```c
int ft_print_x(va_list *ap)
{
    char *cp;
    unsigned int res;
    int i;

    i = 0;
    res = va_arg(*ap, unsigned int); //ì •ìˆ˜ë¥¼ ë°›ìŒ
    cp = ft_dectohex(res);           //ë¬¸ìì—´ cpì— ì •ìˆ˜ë¥¼ 16ì§„ìˆ˜ë¡œ ë°”ê¾¼ ë¬¸ìì—´ì„ ë°›ëŠ”ë‹¤.
    if (!cp)
        return (0);
    while (cp[i])
    {
        write(1, cp + i, 1);
        i++;
    }
    free(cp);
    return (i);
}
ì—¬ê¸°ê¹Œì§€ëŠ” ë™ì¼í•˜ë‹¤.
```

- ### ë¬¸ìì—´ lenê°’ êµ¬í•˜ëŠ” í•¨ìˆ˜

```c
int ft_hex_len(size_t res)
{
    int i;

    i = 1; //ë‚˜ë¨¸ì§€ ê°€ í•„ìš”ì—†ë‹¤ë©´ 16ë³´ë‹¤ ì‘ë‹¤ë©´ ì–´ì°¨í”¼ 1ì´ë‹ˆê°„ , ê·¸ê²Œì•„ë‹ˆë¼ë©´ ë‚˜ë¨¸ì§€ë¥¼ êµ¬í•´ì¤˜ì•¼í•˜ë‹ˆê°„ 1
    while (res > 15)
    {
        res /= 16;
        i++;
    }
    return (i);
}
```

- ### 16ì§„ìˆ˜ ë¬¸ìì—´ë¡œ ë°”ê¾¸ëŠ” í•¨ìˆ˜

```c
char *ft_restohex(size_t res)
{
    char *cp;
    int len;
    int i;
    size_t pow; //%p ë•Œë¬¸ì— í•´ì¤˜ì•¼í•œë‹¤.
    char *hex_str;

    hex_str = "0123456789abcdef"; //16ì§„ìˆ˜ ë¬¸ìì—´ í• ë‹¹
    i = 0;
    len = ft_hex_len(res); //ë¬¸ìì˜ lenê°’ì„ êµ¬í•¨
    cp = (char *)malloc(sizeof(char) * (len + 1));
    if (!cp)
        return (0);
    while (len > 0)
    {
        pow = ft_pow_hex(len - 1); //16ì˜ 0ìŠ¹ ìë¦¬ë¥¼ ë¹¼ì•¼í•˜ê¸°ë•Œë¬¸ì— -1
        cp[i] = hex_str[res / pow]; //ëª«ì„ ì²˜ìŒì—ë„£ê³ 
        res %= pow; // ë‚˜ë¨¸ì§€ë¡œ ë‹¤ì‹œ ë‚˜ëˆ ì•¼í•˜ê¸°ë•Œë¬¸ì—
        len--;
        i++;
    }
    cp[i] = '\0';
    return (cp);
}

size_t ft_pow_hex(int n) //%pë•Œë¬¸ì— í•´ì¤˜ì•¼í•œë‹¤.
{
    size_t ret;

    ret = 1;
    while (n--)
        ret *= 16;
    return (ret);
}

```

- (ex)
- 1234ì„ 256ìœ¼ë¡œ ë‚˜ëˆ´ì„ë•Œ ëª«ì€ 4 ë‚˜ë¨¸ì§€ëŠ”210ì´ ë‚˜ì˜¨ë‹¤. ì´ë§ì€
  256 \* 4 + 210 ì„ í•´ì¤˜ì•¼ 1234ê°€ ë‚˜ì˜¤ê²Œë˜ê³  210ì—ì„œ 16ìœ¼ë¡œ í’€ì–´ì•¼ ë§ê¸°ë•Œë¬¸ì´ë‹¤.

---

- ### %X êµ¬í˜„
- ëŒ€ë¬¸ìë§Œ ë°”ê¿”ì£¼ê¸°ë•Œë¬¸ì— upperí•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ êµ¬í˜„í–ˆë‹¤.

```c
char ft_toupper(char c)
{
    if (c >= 'a' && c <= 'z')
        c -= 32;
    return (c);
}

int ft_print_xx(va_list *ap)
{
    char *str;
    char c;
    unsigned int res;
    int i;

    i = 0;
    res = (unsigned int)va_arg(*ap, unsigned int);
    str = ft_restohex(res);
    if (!str)
        return (-1);
    while (str[i])
    {
        c = ft_toupper(str[i]);
        write(1, &c, 1);
        i++;
    }
    free(str);
    return (i);
}
```

---

## %p

- void \* í˜•ì‹ì˜ í¬ì¸í„° ì¸ìë¥¼ 16ì§„ìˆ˜ë¡œ ì¶œë ¥í•œë‹¤.
- NULLí¬ì¸í„°ê°€ ë‚˜ì˜¨ë‹¤ë©´ 0x0ì„ ì¶œë ¥í•´ ì£¼ì–´ì•¼ í•œë‹¤.

- ì£¼ì†Œê°’ì„ ì–´ë–»ê²Œ ë°›ì•„ì˜¤ëŠ”ê°€? - Cì–¸ì–´ì˜ íŠ¹ì§•ì€ ë©”ëª¨ë¦¬ ì ‘ê·¼ì´ë‹¤.
  ë©”ëª¨ë¦¬ì— ì €ì¥ëœ ë°ì´í„°ëŠ” íƒ€ì…ì„ ì§€ì •í•´ ì£¼ê¸° ì „ê¹Œì§€ëŠ” ê·¸ì € ë¹„íŠ¸ë‚˜ì—´ì— ë¶ˆê³¼í•œë‹¤.
  ë°˜ëŒ€ë¡œ ìƒê°í•˜ë©´ íƒ€ì…ì„ ì§€ì •í•´ ì£¼ëŠ” ìˆœê°„ ìœ ì˜ë¯¸í•œ ë°ì´í„°ë¡œ ë³€í•œë‹¤.
- ì˜ˆë¥¼ë“¤ì–´

```c
 int *pi = (int *)malloc(sizeof(int) * 10);

va_list, malloc ê°™ì€ ì• ë“¤ì´ int , double, char ì—¬ëŸ¬ê°€ì§€ê°€ ê°€ëŠ¥í•œì´ìœ ëŠ”
í•´ë‹¹ ê³µê°„ì˜ sizeë¥¼ ì •í•´ì£¼ê³ , ì ì ˆí•˜ê²Œ í˜•ë³€í™˜ì´ ì¼ì–´ë‚˜ê¸° ë•Œë¬¸.

ì´ê±´ va_list ì—ì„œ ê°’ì„ ë½‘ì•„ì˜¬ë•Œë„ ê°™ë‹¤.
ê·¸ëŸ¼ va_arg ì—ì„œ int ë¥¼ ì§€ì •í•´ ì¤€ ê²ƒì€
va_listì—ì„œ intë§Œí¼ì˜ sizeë¥¼ ê°€ì ¸ê°€ê² ë‹¤ + í¬ì¸í„° ì´ë™ ë¼ëŠ” ì˜ë„

ê·¸ëŸ¼ ì£¼ì†Œê°’ë„ ì¼ë‹¨ ì£¼ì†Œê°’ í˜•íƒœë¡œ ë°›ì•„ì˜¤ë©´ ëœë‹¤.
void *í˜• ë³€ìˆ˜ì— í• ë‹¹ í›„ì— 16ì§„ìˆ˜ ë³€í™˜í•´ì„œ ì¶œë ¥í•´ì£¼ë©´ ëœë‹¤.
ì»´íŒŒì¼ëŸ¬ë§ˆë‹¤ ìš´ì˜ì²´ì œë§ˆë‹¤ ê°ì¢… í™˜ê²½ë§ˆë‹¤ ë‹¤ë¥´ì§€ë§Œ ë‚˜ì˜ ì»´í“¨í„°ì—ì„œëŠ” í¬ì¸í„° ë³€ìˆ˜ì˜ ì‚¬ì´ì¦ˆëŠ” 8ë°”ì´íŠ¸ì´ë‹¤.

ì£¼ì†Œê°’ì˜ ê°€ì¥ ì¤‘ìš”í•œ íŠ¹ì„±ì€
unsigned , ì •ë‹µì€ ì—†ë‹¤
unsigned ì •ìˆ˜í˜•ì¤‘ void * ì˜ ì‚¬ì´ì¦ˆë³´ë‹¤ í° íƒ€ì…ì´ë©´ ëœë‹¤.
```

- ì¶œë ¥ ê°’ì´ `'\0'`ì´ ë„˜ì–´ì™€ë„ ì¶œë ¥ì„ í•˜ê³  ì¹´ìš´íŠ¸ë¥¼ í•´ì•¼í•©ë‹ˆë‹¤.
- ì¶œë ¥ì€ ì•ˆë˜ì§€ë§Œ ì¹´ìš´íŠ¸ëŠ” 1ì´ ë˜ì–´ì•¼í•œë‹¤.

### char ìë£Œí˜•ê³¼ int ìë£Œí˜•

```
int num = va_arg(ap, int);
char ch = va_arg(ap, int);
```

- %d, %cê°™ì´ intë‚˜ charí˜•ì˜ ê°’ì„ ì½ì–´ì˜¬ ë•Œ ë™ì¼í•˜ê²Œ intí˜•ì„ ì‚¬ìš©í–ˆë‹¤.
- intí˜•ì€ 4byte charí˜•ì€ 1byteì¸ë° ì™œ ë˜‘ê°™ì´ ì‚¬ìš©í•˜ëŠ” ê±¸ê¹Œ?
  - va_list ìë£Œí˜•ì´ ë‚´ë¶€ì ìœ¼ë¡œ ê°€ë¥´í‚¤ëŠ” ê°’ì€ 4byteì”© ë‚˜ë‰˜ì–´ì ¸ ìˆì–´ì„œ char, int ìë£Œí˜•ì„ ë™ì¼í•˜ê²Œ ì‚¬ìš©í•œë‹¤.
  - va_list ìë£Œí˜•ì€ í¬ì¸í„° ë³€ìˆ˜ì´ê³ , í¬ì¸í„° ë³€ìˆ˜ëŠ” 4byteì´ê¸° ë•Œë¬¸ì— ê°€ë³€ ì¸ìë“¤ì´ 4byteì”© ë‚˜ë‰˜ì–´ì ¸ìˆë‹¤ê³  ìƒê°í•œë‹¤.

---

## %s êµ¬í˜„

```c
 int ft_print_s(va_list *ap)
{
    int c;
    char *str;

    c = 0;
    str = (char *)va_arg(*ap, char *); //char * í¬ê¸°ë§Œí¼ ê°’ì„ ê°€ì ¸ì˜¤ê³  ê·¸ í¬ê¸°ë§Œí¼ ì´ë™, strì— ë„£ìŒ
    if (!str) //strì´ ë¹„ì–´ìˆë‹¤ë©´ ì˜ˆì™¸ì²˜ë¦¬ (null)ì¶œë ¥í•´ì•¼í•œë‹¤.
        return (write(1, "(null)", 6));
    while (*str) //str ëê¹Œì§€
    {
        write(1, str, 1);
        str++;
        c++; //ì¶œë ¥ê°œìˆ˜
    }
    return (c);
}
```

- ap => ì£¼ì†Œê°’ì„ ì´ìš©í•´ì„œ ì‚¬ìš©í•˜ëŠ”ê²ƒì´ê¸°ë•Œë¬¸ì— í¬ì¸í„°ì¸ì±„ë¡œ ë„˜ê²¨ì•¼í•œë‹¤.
- ë¹„ì–´ìˆë‹¤ë©´ (null)ì¶œë ¥ ì˜ˆì™¸ì²˜ë¦¬
